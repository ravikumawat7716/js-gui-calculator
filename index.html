<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Simple Calculator</title>
        <!-- CSS only -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjs@11.1.0/lib/browser/math.min.js"></script>

<script type="text/JavaScript"> 
function calculate(){
  expression = document.getElementById("expression").value;
  console.log(expression)
  if(expression){
    try {
      answer = eval(expression);
  document.getElementById("expression").value = answer;
  addlog(expression + "=" + answer);
  } catch(e){
    console.log("Bad Expression")
    addlog(expression + "is bad. Please fix it.")
  }
    }

} 

function addlog(msg){
    var ul = document.getElementById("log")
    var li = document.createElement("li")
    var msg_text_node =document.createTextNode(msg)
    li.appendChild(msg_text_node)
    ul.appendChild(li)
  }

  function math_calculate(){
    expression = document.getElementById("expression").value;
    console.log(expression)
    if(expression){
      try {
        answer = math.evaluate(expression);
        console.log(answer);
    document.getElementById("expression").value = answer;
    addlog(expression + "=" + answer);
    } catch(e){
      console.log("Bad Expression")
      addlog(expression + " is bad. Please fix it.")
    }
      }
  } 

  function intialize_app(){
    calculate_button = document.getElementById("calculate")
    calculate_button.addEventListener("click", math_calculate)
  }

  function input_number(v) {
    expression = document.getElementById("expression").value;
    expression = expression + v;
    document.getElementById("expression").value = expression;
    
  }

  function input_operator(o) {
    expression = document.getElementById("expression").value;
    expression = expression + o;
    document.getElementById("expression").value = expression;
    
  }

  function backspace(){
expression = document. getElementById('expression'). value;
document. getElementById('expression').value = expression.substring(0, expression.length -1);
}


function clear_button(){
document. getElementById('input_form').reset();
}

function input_open_parathensis(){
  expression = document.getElementById("expression").value;
    expression = expression + '(';
    document.getElementById("expression").value = expression;
}


function input_close_parathensis(){
  expression = document.getElementById("expression").value;
    expression = expression + ')';
    document.getElementById("expression").value = expression;
}


</script>


<script>
  var input = document.getElementById("expression");
  input.addEventListener("keypress", function(event) {
    if (event.key === "Enter") {
      event.preventDefault();
      document.getElementById("calculate").click();
    }
  });
  </script>

    </head>
    <body onload="intialize_app()">
      <h1 style="text-align: center;">Calculator designed by Ravi Kumawat</h1>  
        <div class="container">
            <div class="row">
              <div class="col">
                
              </div>
              <div class="col">
                <form id="input_form">
                <input type ="text" style="margin: 6px " id="expression" class="form-control" placeholder="Enter Expression"></input>
              </form>

              </div>
              <div class="col">
                
              </div>
            </div>

            <div class="row">
              <div class="col">
                
              </div>
              
              <div class="col" style="margin:0px 50px ">
                <button id="" style="padding : 10px ; margin: 4px 4px" onclick="input_number(7)" class="btn btn-primary">&nbsp;7&nbsp;</button>
                <button id="" style="padding : 10px ; margin: 4px 4px" onclick="input_number(8)" class="btn btn-primary">&nbsp;8&nbsp;</button>
                <button id="" style="padding : 10px ; margin: 4px 4px" onclick="input_number(9)" class="btn btn-primary">&nbsp;9&nbsp;</button>
                <button id="" style="padding : 10px ; margin: 4px 4px" onclick="input_operator('/')" class="btn btn-warning">&nbsp;&#247;&nbsp;</button>
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="backspace()" class="btn btn-danger btn-block">&nbsp;Backspace&nbsp;</button>
              </div>
              <div class="col">
                
              </div>
            </div>

            <div class="row">
              <div class="col">
                
              </div>
              <div class="col" style="margin:0px 50px ">
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="input_number(4)" class="btn btn-primary">&nbsp;4&nbsp;</button>
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="input_number(5)" class="btn btn-primary">&nbsp;5&nbsp;</button>
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="input_number(6)" class="btn btn-primary">&nbsp;6&nbsp;</button>
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="input_operator('*')" class="btn btn-warning">&nbsp;&#215;&nbsp;</button>
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="clear_button()" class="btn btn-danger btn-block">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clear&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button>
              </div>
              <div class="col">
                
              </div>
            </div>

            <div class="row">
              <div class="col">
                
              </div>
              <div class="col" style="margin:0px 50px ">
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="input_number(1)" class="btn btn-primary">&nbsp;1&nbsp;</button>
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="input_number(2)" class="btn btn-primary">&nbsp;2&nbsp;</button>
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="input_number(3)" class="btn btn-primary">&nbsp;3&nbsp;</button>
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="input_operator('-')" class="btn btn-warning">&nbsp;&#45;&nbsp;&nbsp;</button>
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="input_open_parathensis()" class="btn btn-primary">&nbsp;&nbsp;&#40;&nbsp;&nbsp;</button>
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="input_close_parathensis()" class="btn btn-primary">&nbsp;&nbsp;&#41;&nbsp;&nbsp;</button>
              </div>
              <div class="col">
                
              </div>
            </div>
  

            <div class="row">
              <div class="col">
                
              </div>
              <div class="col" style="margin:0px 50px ">
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="input_number(0)" class="btn btn-primary">&nbsp;0&nbsp;</button>
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="input_operator('.')" class="btn btn-primary">&nbsp;.&nbsp;</button>
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="input_operator('%')" class="btn btn-warning">&nbsp;%&nbsp;</button>
                <button id="" style="padding : 10px ; margin:4px 4px" onclick="input_operator('+')" class="btn btn-warning">&nbsp;+&nbsp;</button>
                <button id="calculate" style="padding : 10px ; margin:4px 4px" class="btn btn-success">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button>

                <h3 style="text-align:center; margin:8px;">Logs</h3>
                <ul id="log">
                  
                </ul>
              </div>
              <div class="col">
                
              </div>
            </div>
  
  
          </div>
    </body>
</html>
